---
title: Architecture
description: dbLinter Architecture
sidebar:
  order: 40
---

## Big Picture

Here is an overview of the dbLinter components and their major data flows.

```mermaid
flowchart
    subgraph Cloud ["â›… Cloud"]
        Repo[(Repo)] <--> GUI([Web GUI])
        Repo <--> REST-API(REST-API)
        REST-API --rules--> Rule-Site([Static
                                      Rule Site])
        click Repo "#repo"
        click GUI "#web-gui"
        click REST-API "#rest-api"
        click Rule-Site "#static-rule-site"
    end

    subgraph Client ["ðŸ’» Localâ €â €â €â €â €â €â €"]
        LS[[Language
            Server]] <--> CLI(CLI)
        LS <--> VSCode(VS Code
                       Extension)
        LS <--> SonarQube(SonarQube
                          Plugin)
        click LS "#language-server"
        click CLI "#cli"
        click VSCode "#vs-code-extension"
        click SonarQube "#sonarqube-plugin"
    end

    REST-API --config---> LS
    LS --ignore--> REST-API
```

## Cloud Components

Cloud components are installed on servers managed by United Codes and Grisselbav.

### Repo

The dbLinter repository is implemented using the [PinkDB paradigm](https://www.salvis.com/blog/2018/07/18/the-pink-database-paradigm-pinkdb/)
with an [Oracle AI Database 26ai](https://docs.oracle.com/en/database/oracle/oracle-database/26/index.html).
For example, this means that the [Web GUI](#web-gui) and the [REST-API](#rest-api) access the database via dedicated users
based on the [principle of least privileges](https://en.wikipedia.org/wiki/Principle_of_least_privilege).

### Web GUI

The dbLiner Web GUI is built with [Oracle APEX](https://apex.oracle.com/en/). It is used for managing tenant-specific data,
such as rules, configurations and user access.

For more information, see [Web GUI](/dbLinter/tools/web-gui) in the Tools section.

### REST-API

The dbLinter REST-API is a [SpringBoot](https://spring.io/projects/spring-boot) application. It is an internal API
used only by other dbLinter components. The following subjects are covered:

| Subject | Communication via | Description                                               |
| ------- | ----------------- | --------------------------------------------------------- |
| Email   | JMS               | Sending e-mails via Oracle AQ and Spring Mail.            |
| Rules   | REST              | Providing the rules for generating the static rules site. |
| Config  | REST              | Get the configuration to run checks and SQL-based tests.  |
| Ignore  | REST              | Add test result to be ignored in subsequent runs.         |

All REST-API calls require authentication using an API key consisting of the tenant name, the user's email address and a personal access token.

### Static Rule Site

The dbLinter static rule site is generated daily with [Svelte](https://svelte.dev/) using the latest public rules from the dbLinter repository.
This website makes the dbLinter rules available independently of the dbLinter tool suite.

During the preview phase, this static rule site was used to reference the rules in the `Problems` panel of the [VS Code Extension](#vs-code-extension),
and in reports produced by the [CLI](#cli).

After the preview phase, the dbLinter tools will no longer use the static rule site.

## Local Components

Local components run on machines controlled by the dbLinter users.

### Language Server

The dbLinter Language Server implements a subset of [Microsoft's Language Server Protocol (LSP)](https://microsoft.github.io/language-server-protocol/specifications/lsp/3.17/specification/)
using [Eclipse LSP4J](https://projects.eclipse.org/projects/technology.lsp4j). The Language Server is embedded in the [CLI](#cli) and the [SonarQube Plugin](#sonarqube-plugin).

The following LSP methods are implemented:

| Method                                                                                                                                                           | Description                                             |
| ---------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------- |
| [initialize](https://microsoft.github.io/language-server-protocol/specifications/lsp/3.17/specification/#initialize)                                             | Initialize the language server.                         |
| [shutdown](https://microsoft.github.io/language-server-protocol/specifications/lsp/3.17/specification/#shutdown)                                                 | Close the dbLinter session and free resources.          |
| [exit](https://microsoft.github.io/language-server-protocol/specifications/lsp/3.17/specification/#exit)                                                         | Exit the language server.                               |
| [workspace/didChangeConfiguration](https://microsoft.github.io/language-server-protocol/specifications/lsp/3.17/specification/#workspace_didChangeConfiguration) | Apply a configuration according to the client settings. |
| [textDocument/diagnostic](https://microsoft.github.io/language-server-protocol/specifications/lsp/3.17/specification/#textDocument_diagnostic)                   | Get the issues for an URI.                              |
| [textDocument/didOpen](https://microsoft.github.io/language-server-protocol/specifications/lsp/3.17/specification/#textDocument_didOpen)                         | Add an URI and its content to the cache.                |
| [textDocument/didChange](https://microsoft.github.io/language-server-protocol/specifications/lsp/3.17/specification/#textDocument_didChange)                     | Update the content of an URI in the cache.              |
| [textDocument/didClose](https://microsoft.github.io/language-server-protocol/specifications/lsp/3.17/specification/#textDocument_didClose)                       | Remove an URI from the cache.                           |
| [textDocument/codeAction](https://microsoft.github.io/language-server-protocol/specifications/lsp/3.17/specification/#textDocument_codeAction)                   | Get the quick fixes for a text range of an URI.         |
| [codeAction/resolve](https://microsoft.github.io/language-server-protocol/specifications/lsp/3.17/specification/#codeAction_resolve)                             | Apply a quick fix.                                      |

Additionally, the Language Server implements the following non-standard JSON-RPC methods used by the [VS Code Extension](#vs-code-extension),
the [CLI](#cli) and the [SonarQube Plugin](#sonarqube-plugin):

| Method                     | Description                             |
| -------------------------- | ----------------------------------------|
| dbLinter/tests             | Get all SQL-based tests.                |
| dbLinter/runTest           | Run a SQL-based test.                   |
| dbLinter/ignoreTestResults | Save test results to be ignored.        |
| dbLinter/hasFeature        | Check if a dbLinter feature is enabled. |
| dbLinter/isConfigLoaded    | Check if the configuration is loaded.   |
| dbLinter/isUriIncluded     | Check if a given URI is in the scope.   |
| dbLinter/plsqlMetric       | Get the PL/SQL metrics for a given URI. |
| dbLinter/rules             | Get all rules.                          |

### CLI

The dbLinter Command Line Interface (CLI) is a [SpringBoot](https://spring.io/projects/spring-boot) application.
It can start a language server and run checks and SQL-based tests, producing various output formats.
The CLI is included in the [VS Code Extension](#vs-code-extension), but it can also be used standalone,
for example within a CI/CD pipeline.

For more information, see [CLI](/dbLinter/tools/cli) in the Tools section.

### VS Code Extension

The dbLinter VS Code Extension can be installed in any IDE that implement the [Visual Studio Code Extension API](https://code.visualstudio.com/api),
such as [Visual Studio Code](https://code.visualstudio.com/), [VSCodium](https://vscodium.com/), [Cursor](https://cursor.com/), [Windsurf](https://windsurf.com/editor)
and [Theia IDE](https://theia-ide.org/#theiaide).

The extension provides the rule violations for URIs in the scope via the included language server.
It further can run SQL-based tests and CLI commands.

For more information, see [VS Code Extension](/dbLinter/tools/vscode) in the Tools section.

### SonarQube Plugin

The dbLinter SonarQube Plugin can be installed in the free [SonarQube Community Build](https://www.sonarsource.com/open-source-editions/sonarqube-community-edition/)
as well as in any commercial [SonarQube Server](https://www.sonarsource.com/products/sonarqube/server/) edition.

For more information, see [SonarQube Plugin](/dbLinter/tools/sonarqube) in the Tools section.
